<div class="container mt-4">
  <h2 class="mb-4">Histórico de Compras</h2>

  <div *ngIf="!listaSelecionada">
    <div class="list-group mb-4">
      <button
        type="button"
        class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
        *ngFor="let lista of historico"
        (click)="selecionarLista(lista)"
      >
        <span>
          <strong>{{ lista.nome_lista }}</strong>
          <small class="text-muted ms-2">{{ lista.data }}</small>
        </span>
        <span class="badge bg-primary rounded-pill">R$ {{ lista.valorTotal | number:'1.2-2' }}</span>
      </button>
    </div>
    <div *ngIf="historico.length === 0" class="alert alert-info">
      Nenhuma lista encontrada no histórico.
    </div>
  </div>

  <div *ngIf="listaSelecionada">
    <button class="btn btn-link mb-3" (click)="voltar()">&larr; Voltar</button>
    <h4>{{ listaSelecionada.nome_lista }}</h4>
    <p><strong>Data:</strong> {{ listaSelecionada.data }}</p>
    <!-- <p><strong>Total:</strong> R$ {{ listaSelecionada.valorTotal | number:'1.2-2' }}</p> -->
    <table class="table table-bordered mt-3">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Quantidade</th>
          <th>Marca</th>
          <th>Valor</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of listaSelecionada.itens">
          <td>{{ item.nomeItem }}</td>
          <td>{{ item.quantidade }}</td>
          <td>{{ item.marca }}</td>
          <td>R$ {{ item.valor | number:'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
